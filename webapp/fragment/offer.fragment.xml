<core:FragmentDefinition 
	xmlns:u="sap.ui.unified" 
	xmlns:l="sap.ui.layout" 
	xmlns="sap.m" 
	xmlns:core="sap.ui.core" 
	xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
	<Panel expandable="true" expanded="true" width="auto">
		<headerToolbar>
			<Toolbar height="3rem">
				<Title text="{i18n>offer}" />
				<ToolbarSpacer />
			</Toolbar>
		</headerToolbar>
		<content>
			<VBox id="pageOfferDetails">
				<Label class="topLabel" text="{i18n>status}" />
				<Input enabled="false" id="status" value="{Status}" />
				<Label class="topLabel" text="{i18n>variantNumber}" />
				<Input type="Number" id="number" value="{VariantNumber}" />
				<Label required="true" class="topLabel" text="{i18n>counterparty}" />
				<MultiInput 
					id="counterparty"
					custom:id="counterpartyPopup"
					custom:set="counterpartyDetail"
					custom:filters="Code,Name"
					custom:key="counterparty"
					custom:name="ToCounterpartyDetail"
					showValueHelp="true"
					tokens="{ path: 'ToCounterpartyDetail' }"
					valueHelpRequest="handleValueHelp">
					<tokens>
						<Token key="{Code}" text="{Name}" />
					</tokens>
				</MultiInput>
				<Label required="true" class="topLabel" text="{i18n>productType}" />
				<Select id="productType" custom:key="productType" forceSelection="false" selectedKey="{ProductType}" width="100%" 
					items="{ path: '/dictionarySalesDivisionsSet', sorter: { path: 'Code' } }">
					<core:Item key="{Code}" text="{Code} - {Name}"/>
				</Select>
				<Label required="true" class="topLabel" text="{i18n>paymentMethod}"/>
				<Select id="paymentMethod" selectedKey="{PaymentMethod}" custom:key="paymentMethod" width="100%" forceSelection="false" 
					items="{ path: '/dictionaryPaymentMethodSet', sorter: { path: 'Name' } }">
					<core:Item key="{Code}" text="{Code} - {Name}"/>
				</Select>
				<Label required="true" class="topLabel" text="{i18n>paymentTerms}"/>
				<Select id="paymentTerms" selectedKey="{PaymentTerm}" custom:key="paymentTerms" width="100%" forceSelection="false" 
					items="{ path: '/dictionaryPaymentTermSet', sorter: { path: 'Name' }}">
					<core:Item key="{Code}" text="{Code} - {Name}"/>
				</Select>
				<Label required="true" class="topLabel" text="{i18n>meansOfTransport}" />
				<Select custom:key="meansOfTransport" selectedKey="{MeansOfTransport}" forceSelection="false" width="100%"
					items="{ path: '/dictionaryMeansOfTransportSet', sorter: { path: 'Name' } }">
					<core:Item key="{Code}" text="{Name}"/>
				</Select>
				<Label class="topLabel" text="{i18n>comments}" />
				<TextArea id="comment" value="{Comments}" rows="6" width="100%" />
			</VBox>
		</content>
	</Panel>
	<Panel expandable="true" expanded="false" width="auto">
		<headerToolbar>
			<Toolbar height="3rem">
				<Title text="{i18n>attachments}" />
				<ToolbarSpacer />
				<Button id="uploadDownload" custom:id="upload" text="{i18n>download}" press="tableDownload" type="Accept" enabled="false"/>
				<Button id="uploadDelete" custom:id="upload" custom:upload="true" text="{i18n>delete}" press="tableDelete" type="Reject" enabled="false"/>
			</Toolbar>
		</headerToolbar>
		<content>
			<u:FileUploader class="topLabel" multiple="true" name="upload" id="upload" useMultipart="false" uploadOnChange="false" custom:id="upload" sendXHR="true" 
				uploadUrl="{upload>/uploadUrl}" tooltip="Upload your file to the local server" change="onFileChange" uploadComplete="onFileUploaded" 
				style="Emphasized" width="100%">
				<u:headerParameters>
					<u:FileUploaderParameter name="slug" value="{upload>/fileName}"/>
					<u:FileUploaderParameter name="x-csrf-token" value="{upload>/token}"/>
				</u:headerParameters>
			</u:FileUploader>
			<Table id="uploadTable" class="topLabel" custom:id="upload" select="onAttachmentSelect" mode="SingleSelectMaster" includeItemInSelection="true" width="100%" 
				items="{ path: 'ToAttachment' }" noDataText="{i18n>noData}" growing="true" growingThreshold="5" growingScrollToLoad="false">
				<columns>
					<Column width="40%"><Label class="black" text="{i18n>name}"/></Column>
					<Column hAlign="Center" width="30%"><Label class="black" text="{i18n>type}"/></Column>
					<Column hAlign="Center" width="30%"><Label class="black" text="{i18n>uploadDate}"/></Column>
				</columns>
				<items>
					<ColumnListItem>
						<cells>
							<Text text="{ path: 'FileName', formatter: '.formatter.getFileName' }" />
							<Text text="{DocType} - {DocTypeDescr}"/>
							<Text text="{ path: 'UploadDate', type: 'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy' } }"/>
						</cells>
					</ColumnListItem>
				</items>
			</Table>
		</content>
	</Panel>
</core:FragmentDefinition>